
impl string {
    fn hello() -> string {
        "hello!"
    }

    fn log_len(self) {
        println(self.length());
    }
}

impl string[] {
    fn lmao(self) -> boolean {
        true
    }
}

declare TestRect {

}

declare Rect {
    width: float,
    height: float,
    color: Color,
    children: component[]
}

enum Option<T> {
    Some { value: T },
    None
}

trait Iterable<T> {
    fn next(self) -> Option<T>;
}

struct ArrayIter<T> {
    value: T[],
    index: integer
}

impl<T> trait Iterable<T> for ArrayIter<T> {
    fn next(self) -> Option<T> {
        if self.index == self.value.size() {
            Option::None<T>
        } else {
            const returned = self.value[self.index];

            self.index = self.index + 1;

            Option::Some<T> {
                value: returned
            }
        }
    }
}

impl<T> T[] {
    fn iter(self) -> ArrayIter<T> {
        ArrayIter {
            value: self,
            index: 0
        }
    }
}

impl trait Drawable for Rect {
    fn draw(self, context: DrawContext) {
        context.draw_rect(0.0, 0.0, self.width, self.height, self.color);
        context.draw_rect(40.0, 40.0, self.width, self.height, self.color);

        println(self.children);

        let iterator = self.children.iter();

        println(iterator);
        println(self.children.size());

        while iterator.next() is Option::Some<component> { value } {
            if value is TestRect test_rect {
                println(test_rect);
            }
        }
    }
}

struct NumberIter {
    start: integer
}

impl trait Iterable<integer> for NumberIter {
    fn next(self) -> Option<integer> {
        const returned = self.start;

        self.start = self.start + 1;

        Option::Some<integer> { value: returned }
    }
}

struct TestOneOf {

}

impl TestOneOf {
    fn print(value: string | integer) {
        println(value);
    }
}

<TestOneOf>::print("EBL");

if 1 == 2 {
    println("world is ok");
}

println(1 == null);
println("hello world!");
println(["a", "b", "c"]);
println(["a", "b", "c"].lmao());
println(["a", "b", "c", "d"].lmao());
println(ArrayIter<string> { value: ["ddd", "b", "c", "d"], index: 0 }.next());
println(<string>::hello().length());

"hello!".log_len();

Rectangle {
    width: 100px,
    height: 20%,
    corner_radius: all(12px),
    background: hex(0x00FF00),
    foreground: rgb(255, 0, 0),
    some_flag: true,
    string_value: "hello world",
    test_array: [true, false, true],

    Rectangle {
        width: 100px,
        height: 20%,
        corner_radius: all(12px),
        background: hex(0x00FF00),
        foreground: rgb(255, 0, 0),
        some_flag: true,
        string_value: "world hello",
        test_array: [true, false, true],
    }
};

const string_iterator = ArrayIter<Rectangle> { value: [
        Rectangle {
        width: 100px,
        height: 20%,
        corner_radius: all(12px),
        background: hex(0x00FF00),
        foreground: rgb(255, 0, 0),
        some_flag: true,
        string_value: "www",
        test_array: [true, false, true],
    },
        Rectangle {
        width: 100px,
        height: 20%,
        corner_radius: all(12px),
        background: hex(0x00FF00),
        foreground: rgb(255, 0, 0),
        some_flag: true,
        string_value: "world hello",
        test_array: [true, false, true],
    }
], index: 0 };

while string_iterator.index != string_iterator.value.size() {
    println(string_iterator.next());
}

println(string_iterator.next());

const infinite_iterator = NumberIter { start: 0 };

println(infinite_iterator.next());
println(infinite_iterator.next());
println(infinite_iterator.next());
println(infinite_iterator.next());
println(infinite_iterator.next());
println(infinite_iterator.next());
println(infinite_iterator.next());
println(infinite_iterator.next());
println(infinite_iterator.next());
println(infinite_iterator.next());
println(infinite_iterator.next());
println(infinite_iterator.next());

enum Gender {
    Male,
    Female,
}


println(Gender::Male);
println(["a", "b"].iter());

const string_iterator = [
        Rectangle {
        width: 100px,
        height: 20%,
        corner_radius: all(12px),
        background: hex(0x00FF00),
        foreground: rgb(255, 0, 0),
        some_flag: true,
        string_value: "wwww",
        test_array: [true, false, true],
    },
        Rectangle {
        width: 100px,
        height: 20%,
        corner_radius: all(12px),
        background: hex(0x00FF00),
        foreground: rgb(255, 0, 0),
        some_flag: true,
        string_value: "world hello",
        test_array: [true, false, true],
    }
].iter();

while string_iterator.next() is Option::Some<Rectangle> { value } {
    println(value);
}

Rect {
    width: 100.0,
    height: 100.0,
    color: rgb(0xFF, 0xFF, 0x00),
    
    TestRect {}
    TestRect {}
    TestRect {}
}